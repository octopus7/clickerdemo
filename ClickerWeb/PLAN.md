# 호랑이 떡공장 클릭커 게임 MVP 계획

## 1. 목표
- 정적 웹페이지 기반으로 빠르게 플레이 가능한 클릭커 MVP를 만든다.
- 서버 없이 `localStorage`만 사용해 저장/복구를 지원한다.
- 1회 플레이 기준 `20분` 안에 성장 체감이 분명하도록 설계한다.

## 2. 확정 기획
- 테마: 귀엽고 힐링 톤의 호랑이 떡공장.
- 생산 라인: `반죽 -> 찜/성형 -> 포장 -> 판매 큐`.
- 클릭 기능: 유저 클릭은 `반죽`을 즉시 추가한다.
- 판매 방식: `판매 큐 Flush 버튼`으로 누적된 상품을 한 번에 판매한다.
- 판매 버튼 쿨타임: 없음.
- 프레스티지: 없음.
- 오프라인 보상: 최대 `8시간` 상한.

## 3. 기술 스택
- 빌드/개발 서버: `Vite`
- 언어: `TypeScript`
- UI: Vanilla DOM + CSS
- 저장: `localStorage` (단일 save key + version)
- 테스트: `Vitest` (경제/생산 로직 중심)

## 4. 이미지 리소스 요약 (외부 제작용)
- 공통 규격
- 포맷: `PNG` (투명 배경)
- 컬러/톤: 귀엽고 힐링, 채도 중간, 과한 대비/네온 톤 지양
- 기준 해상도: 세로형 UI 기준 `2x` 제작 (레티나 대응)
- 파일명 규칙: `asset_{category}_{name}_{state}.png`
- 예시: `asset_button_sell_idle.png`

- 필수 리소스 (MVP)
- 배경 1종: 공장 내부 전경
- 공정 아이콘 4종: 반죽, 찜/성형, 포장, 판매
- 재화 아이콘 2종: 돈, 떡(완제품)
- 클릭 오브젝트 1종: 클릭 대상 떡/반죽 오브젝트
- 버튼 3종: 클릭, 판매 Flush, 업그레이드
- 호랑이 작업자 4종: 공정별 대표 포즈 1개씩
- 업그레이드 아이콘 6종: 생산속도/효율/가격 관련 공통 아이콘 세트

- 상태별 권장 세트
- 버튼: `idle`, `hover`, `press`, `disabled`
- 클릭 오브젝트: `idle`, `hit`
- 호랑이: `idle` (필수), `work` (가능하면)

- 권장 픽셀 크기
- 배경: `1920x1080`
- 공정/재화 아이콘: `128x128`
- 버튼: `320x120` (가변 폭 대응 위해 좌우 여백 충분히)
- 클릭 오브젝트: `512x512`
- 호랑이 작업자: `384x384`
- 업그레이드 아이콘: `96x96`

- 전달 폴더 구조
- `public/assets/bg/`
- `public/assets/icons/`
- `public/assets/buttons/`
- `public/assets/tigers/`
- `public/assets/upgrades/`

- 품질 체크 기준
- 투명 가장자리 흰/검 테두리(halo) 없는지 확인
- 동일 카테고리 자산 간 광원 방향/그림자 톤 일관성 유지
- 작은 크기 축소(64px)에서도 아이콘 식별 가능해야 함

## 5. 코어 시스템 설계
- 자원
- `gold`: 현재 보유 돈
- `dough`, `steam`, `pack`, `sellQueue`: 공정별 재고/대기열
- `tigersByStage`: 공정별 호랑이 수
- `upgrades`: 구매한 업그레이드 상태

- 공정 처리
- 각 공정은 `초당 처리량(tps)`을 가진다.
- 상위 공정은 하위 공정 재고를 소모해 다음 단계로 넘긴다.
- 틱 기반 업데이트(예: 100ms~200ms) + 델타타임 보정.

- 클릭 처리
- 클릭 1회당 `dough`를 즉시 증가.
- 클릭 연타가 과도한 우위를 만들지 않도록 초반 수치만 완만하게 설정.

- 판매 처리
- `sellQueue`는 자동 판매되지 않는다.
- 판매 버튼 클릭 시 `sellQueue` 전량 판매 후 `gold` 증가.

- 저장/복구
- 자동저장 주기: 5초.
- 저장 구조에 `saveVersion`, `lastSeenAt`(timestamp) 포함.
- 재접속 시 `now - lastSeenAt` 기준 오프라인 생산 계산, 최대 8시간까지만 적용.

## 6. 밸런스 목표 (20분 세션)
- 0~3분: 첫 업그레이드 2~3회 구매 가능.
- 3~10분: 공정 병목이 1~2회 이동.
- 10~20분: 자동 생산 비중이 커지고 Flush 타이밍 판단 재미 제공.

## 7. 구현 단계
- Step 1: 프로젝트 생성 (`Vite + Vanilla TS`) 및 기본 화면 뼈대 구성.
- Step 2: 생산 파이프라인 시뮬레이터 구현.
- Step 3: 클릭 반죽 추가 + 판매 Flush 버튼 구현.
- Step 4: 업그레이드/호랑이 배치 시스템 구현.
- Step 5: `localStorage` 저장/복구 + 오프라인 8시간 계산 구현.
- Step 6: UI 수치 가독성 개선 및 모션(필요 시 GSAP 도입 검토).
- Step 7: 밸런스 조정 + 버그 수정 + 최소 테스트 추가.

## 8. 완료 기준 (MVP DoD)
- 페이지 새로고침 후 진행 데이터가 정상 복원된다.
- 오프라인 후 복귀 시 최대 8시간 범위의 생산 보상이 적용된다.
- 클릭/자동생산/판매 Flush가 서로 충돌 없이 동작한다.
- 20분 플레이에서 성장 체감과 의사결정(업그레이드/판매 타이밍)이 존재한다.

## 9. MVP 이후 확장 아이디어
- 클릭 버프(짧은 생산 가속), 랜덤 이벤트, 테마 스킨.
- 공정 추가(검수/유통), 희귀 떡 레시피, 업적 시스템.
- 밸런스 도구(내부 디버그 패널, 배율 설정).
